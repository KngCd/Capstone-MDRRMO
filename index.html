<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/tailwind/output.css">
    <link rel="stylesheet" href="css/tailwind/style.css">
    <!-- Poppins font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<body>
    <main class="flex">
        <div class="relative">
            <!-- Sidebar -->
            <section id="sidebar" class="bg-[#F7F7F7] flex flex-col h-screen transition-all duration-300 ease-in-out w-[342px]">
                <!-- Responsys Logo -->
                <div class="flex items-center p-3 gap-3 sidebar-section transition-all duration-300">
                    <div class="bg-[#D9D9D9] w-[56px] h-[56px] rounded-full shrink-0 flex items-center justify-center overflow-hidden">
                        <!-- Add logo image if needed -->
                    </div>
                    <div class="sidebar-content transition-all duration-300">
                        <p class="font-semibold text-xl">Responsys</p>
                        <p class="font-normal text-xs">Web App</p>
                    </div>
                </div>

                <!-- Profile -->
                <div class="profile-section flex items-center p-3 gap-3 w-full max-w-[304px] h-[74px] ring-1 ring-[#DDDDDD] rounded-xl mx-auto mt-8 mb-5 sidebar-section transition-all duration-300 justify-start">
                    <div class="bg-[#D9D9D9] w-[43px] h-[43px] rounded-full overflow-hidden shrink-0">
                        <img src="images/sir-loyd.png" alt="">
                    </div>
                    <div class="sidebar-content transition-all duration-300 w-full">
                        <p class="font-normal text-[17px]">Loyd Anthony C. Driz</p>
                        <p class="font-normal text-xs text-[#6E6E6E]">loyddriz@gmail.com</p>
                    </div>
                    <div class="ml-auto cursor-pointer sidebar-content transition-all duration-300">
                        <i class="fa-solid fa-caret-down w-6 h-6" id="caret"></i>
                    </div>
                </div>

                <!-- Menu Items -->
                <div class="flex p-4 gap-3 items-center w-[304px] h-[44px] rounded-xl mx-auto menu-section
                    hover:bg-indigo-600 hover:text-white active:bg-indigo-700 focus:outline-none focus:ring focus:ring-indigo-300
                    transition-all duration-200">
                    <i class="fa-solid fa-chart-line"></i>
                    <p class="font-normal text-[17px] sidebar-content">Dashboard</p>
                </div>

                <div class="flex p-4 gap-3 items-center w-[304px] h-[44px] rounded-xl mx-auto menu-section
                    hover:bg-indigo-600 hover:text-white active:bg-indigo-700 focus:outline-none focus:ring focus:ring-indigo-300
                    transition-all duration-200" id="maps-menu">                    
                    <i class="fa-solid fa-location-dot"></i>
                    <p class="font-normal text-[17px] sidebar-content">Maps</p>
                    <div class="ml-auto cursor-pointer sidebar-content" id="maps-dropdown-icon">
                        <i class="fa-solid fa-caret-down w-6 h-6" id="caret2"></i>
                    </div>
                </div>

                <!-- Dropdown Content -->
                <div id="dropdown-content" class="max-h-0 overflow-hidden bg-gray-200 rounded-xl w-[304px] mx-auto transition-all duration-500 ease-in-out">
                    <div class="ml-6">
                        <div class="flex gap-3 p-4 items-center hover:bg-indigo-600 hover:text-white active:bg-indigo-700 focus:outline-none focus:ring focus:ring-indigo-300 menu-section">
                            <i class="fa-solid fa-map-location-dot"></i>
                            <p class="font-normal text-[17px]">Incident Map</p>
                        </div>
                        <div class="flex gap-3 p-4 items-center hover:bg-indigo-600 hover:text-white active:bg-indigo-700 focus:outline-none focus:ring focus:ring-indigo-300">
                            <i class="fa-solid fa-exclamation-circle"></i>
                            <p class="font-normal text-[17px]">Hazard Map</p>
                        </div>
                    </div>
                </div>

                <div class="flex p-4 gap-3 items-center w-[304px] h-[44px] rounded-xl mx-auto menu-section
                    hover:bg-indigo-600 hover:text-white active:bg-indigo-700 focus:outline-none focus:ring focus:ring-indigo-300
                    transition-all duration-200">
                    <i class="fa-solid fa-magnifying-glass-chart"></i>
                    <p class="font-normal text-[17px] sidebar-content">Incident Reports</p>
                </div>
            </section>
            
            <button id="sidebar-toggle"
                class="absolute top-[26px] left-[342px] w-10 h-10 rounded-full bg-white text-gray-600 hover:text-black shadow-md z-50 flex items-center justify-center transition-all duration-300 ease-in-out"
                style="transform: translateX(-50%);">
                <i id="sidebar-icon" class="fa-solid fa-angle-left text-lg"></i>
            </button>
        </div>

        <!-- Main Content -->
        <section class="flex-1 p-6">
            <!-- Your main content goes here -->
            <h1 class="text-xl font-semibold">Main Content</h1>
        </section>
    </main>

    <script>
        const sidebar = document.getElementById("sidebar");
        const sidebarToggle = document.getElementById("sidebar-toggle");
        const sidebarIcon = document.getElementById("sidebar-icon");
        const sidebarContent = document.querySelectorAll(".sidebar-content");

        const mapsMenu = document.getElementById("maps-menu");
        const dropdownContent = document.getElementById("dropdown-content");
        const caretIcon2 = document.getElementById("caret2");

        const profileCaret = document.getElementById("caret");
        const profileDropdownToggle = profileCaret?.parentElement;

        let isSidebarOpen = true;
        let isDropdownOpen = false;

        sidebarToggle.addEventListener("click", () => {
            isSidebarOpen = !isSidebarOpen;

            if (isSidebarOpen) {
                sidebar.classList.remove("w-[80px]");
                sidebar.classList.add("w-[342px]");
                sidebarToggle.style.left = "342px";
                sidebarIcon.classList.replace("fa-angle-right", "fa-angle-left");

                // Show all content (sidebar)
                sidebarContent.forEach(el => el.classList.remove("hidden"));

                // Adjust profile section width when sidebar is open
                document.querySelectorAll(".profile-section").forEach(el => {
                    el.classList.remove("w-[43px]");
                    el.classList.add("max-w-[304px]");
                    el.classList.add("ring-1", "ring-[#DDDDDD]");
                    el.classList.remove("py-1");
                    el.classList.add("py-3");
                });

                // Adjust sidebar-section when sidebar is open
                document.querySelectorAll(".sidebar-section").forEach(el => {
                    el.classList.remove("w-[80px]");
                    el.classList.add("w-[342px]");  // Full width when sidebar is open
                    el.classList.remove("justify-center");
                    el.classList.add("justify-start");
                });

                // Adjust menu items' width and content when sidebar is open
                document.querySelectorAll(".menu-section").forEach(el => {
                    el.classList.remove("w-[80px]");
                    el.classList.add("w-[304px]");  // Full width when sidebar is open
                    el.classList.remove("justify-center");
                    el.classList.add("justify-start");
                });

                // Show text labels for menu items
                document.querySelectorAll(".sidebar-content").forEach(el => {
                    el.classList.remove("hidden");
                });

            } else {
                sidebar.classList.remove("w-[342px]");
                sidebar.classList.add("w-[80px]");
                sidebarToggle.style.left = "80px";
                sidebarIcon.classList.replace("fa-angle-left", "fa-angle-right");

                // Hide all content (sidebar)
                sidebarContent.forEach(el => el.classList.add("hidden"));

                // Adjust profile section width when sidebar is closed
                document.querySelectorAll(".profile-section").forEach(el => {
                    el.classList.remove("max-w-[304px]");
                    el.classList.add("w-[43px]");  // Set to the profile image width
                    el.classList.remove("py-3");
                    el.classList.remove("ring-1", "ring-[#DDDDDD]");
                    el.classList.add("py-1");
                });

                // Adjust sidebar-section when sidebar is closed
                document.querySelectorAll(".sidebar-section").forEach(el => {
                    el.classList.remove("w-[342px]");
                    el.classList.add("w-[80px]");  // Reduce width when sidebar is closed
                    el.classList.remove("justify-start");
                    el.classList.add("justify-center");
                });

                // Adjust menu items' width and content when sidebar is closed
                document.querySelectorAll(".menu-section").forEach(el => {
                    el.classList.remove("w-[304px]");
                    el.classList.add("w-[80px]");  // Reduce width when sidebar is closed
                    el.classList.remove("justify-start");
                    el.classList.add("justify-center");
                });

                // Hide text labels for menu items
                document.querySelectorAll(".sidebar-content").forEach(el => {
                    el.classList.add("hidden");
                });

                // Collapse maps dropdown
                dropdownContent.classList.remove("max-h-[200px]");
                dropdownContent.classList.add("max-h-0");
                dropdownContent.classList.remove("mb-4");
                caretIcon2.classList.replace("fa-caret-up", "fa-caret-down");
                caretIcon2.classList.add("hidden");
                profileCaret?.classList.replace("fa-caret-up", "fa-caret-down");

                isDropdownOpen = false;
            }
        });

        mapsMenu.addEventListener("click", () => {
            if (!isSidebarOpen) return;

            isDropdownOpen = !isDropdownOpen;

            if (isDropdownOpen) {
                dropdownContent.classList.remove("max-h-0");
                dropdownContent.classList.add("max-h-[200px]");
                dropdownContent.classList.add("mb-4"); // Add margin when the dropdown is open
                caretIcon2.classList.remove("fa-caret-down");
                caretIcon2.classList.add("fa-caret-up");
            } else {
                dropdownContent.classList.remove("max-h-[200px]");
                dropdownContent.classList.add("max-h-0");
                dropdownContent.classList.remove("mb-4"); // Add margin when the dropdown is open
                caretIcon2.classList.remove("fa-caret-up");
                caretIcon2.classList.add("fa-caret-down");
            }
        });

        profileDropdownToggle?.addEventListener("click", () => {
            if (profileCaret.classList.contains("fa-caret-down")) {
                profileCaret.classList.remove("fa-caret-down");
                profileCaret.classList.add("fa-caret-up");
            } else {
                profileCaret.classList.remove("fa-caret-up");
                profileCaret.classList.add("fa-caret-down");
            }
        });
    </script>

    <script>
        // Select all menu items
        const menuItems = document.querySelectorAll(".menu-section");

        // Function to handle the active state toggle
        function handleActiveState(event) {
            // Remove active class from all menu items
            menuItems.forEach(item => {
                item.classList.remove("bg-indigo-700", "text-white");
            });

            // Add active class to the clicked item
            event.currentTarget.classList.add("bg-indigo-700", "text-white");
        }

        // Add event listeners for click events on all menu items
        menuItems.forEach(item => {
            item.addEventListener("click", handleActiveState);
        });
    </script>

</body>
</html>